  - platform: moon
  - platform: darksky
    api_key: 76c0042d857a90702e045cafedb9da25
    monitored_conditions:
      - summary
      - hourly_summary
      - daily_summary
      - icon
      - temperature
      - apparent_temperature
      - temperature_high
      - temperature_low
      - humidity
      - visibility
      - pressure
      - uv_index
  - platform: template
    sensors:
      livingroom_wireless_switch_battery:
        friendly_name: 'Living Room Wireless Switch'
        value_template: '{{ states.binary_sensor.wall_switch_158d0001830c7c.attributes.battery_level }}'
        icon_template: mdi:battery
        unit_of_measurement: "%"
      button_switch_battery:
        friendly_name: 'Button Switch'
        value_template: '{{ states.binary_sensor.switch_158d00018721c6.attributes.battery_level }}'
        icon_template: mdi:battery
        unit_of_measurement: "%"
      cube_battery:
        friendly_name: 'Cube'
        value_template: '{{ states.binary_sensor.cube_158d000103a8a5.attributes.battery_level }}'
        icon_template: mdi:battery
        unit_of_measurement: "%"
      frontdoor_battery:
        friendly_name: 'Front Door Sensor'
        value_template: '{{ states.binary_sensor.door_window_sensor_158d00019e1738.attributes.battery_level}}'
        icon_template: mdi:battery
        unit_of_measurement: "%"
      hall_motion_battery:
        friendly_name: 'Hall Motion Sensor'
        value_template: '{{ states.binary_sensor.motion_sensor_158d0001655f53.attributes.battery_level }}'
        icon_template: mdi:battery
        unit_of_measurement: "%"
      hall_wireless_switch_battery:
        friendly_name: 'Hall Wireless Switch'
        value_template: '{{ states.binary_sensor.wall_switch_both_158d00017110b8.attributes.battery_level }}'
        icon_template: mdi:battery
        unit_of_measurement: "%"
      temperaure__sensor_battery:
        friendly_name: 'Temperature Sensor'
        value_template: '{{ states.sensor.humidity_158d0001b9205b.attributes.battery_level }}'
        icon_template: mdi:battery
        unit_of_measurement: "%"
      landing_motion_battery:
        friendly_name: 'Landing Motion Sensor'
        value_template: '{{ states.binary_sensor.motion_sensor_158d000187392e.attributes.battery_level }}'
        icon_template: mdi:battery
        unit_of_measurement: "%"
      kitchen_leak_battery:
        friendly_name: 'Hall Toilet Leak Sensor'
        value_template: '{{ states.binary_sensor.water_leak_sensor_158d0001c3472b.attributes.battery_level }}'
        icon_template: mdi:battery
        unit_of_measurement: "%"
      outside_motion_sensor_battery:
        friendly_name: 'Outside Motion Sensor'
        value_template: '{{ states.sensor.illumination_158d0001e43e18.attributes.battery_level }}'
        icon_template: mdi:battery
        unit_of_measurement: "%"
      patio_door_sensor_battery:
        friendly_name: 'Patio Door Sensor'
        value_template: '{{ states.binary_sensor.door_window_sensor_158d00019e18bf.attributes.battery_level }}'
        icon_template: mdi:battery
        unit_of_measurement: "%"
      utility_leak_sensor_battery:
        friendly_name: 'Utility Leak Sensor'
        value_template: '{{ states.binary_sensor.water_leak_sensor_158d0001c347c9.attributes.battery_level }}'
        icon_template: mdi:battery
        unit_of_measurement: "%"
      tradfri_dimmer_battery:
        friendly_name: 'Tradfri Dimmer'
        value_template: '{{ states.sensor.tradfri_wireless_dimmer.attributes.battery_level | float(2) }}'
        icon_template: mdi:battery
        unit_of_measurement: "%"
      since_last_boot_templated:
        friendly_name: "Last reboot"
        value_template: >-
          {%- set slb = states.sensor.since_last_boot.state.split(' ') -%}
          {%- set count = slb | length -%}
          {%- set hms = slb[count - 1] -%}
          {%- set hms_trimmed = hms.split('.')[0] -%}
          {%- set hms_split = hms_trimmed.split(':') -%}
          {%- set hours = hms_split[0] | int -%}
          
          {%- if count == 3 -%}
            {{ slb[0] ~ ' ' ~ slb[1] ~ ' ' }}
          {%- endif -%}
          {%- if hours > 0 -%}
            {%- if hours == 1 -%}
              1 hour
            {%- else -%}
              {{ hours }} hours
            {%- endif -%}
          {%- endif -%}
      temperature_high_templated:
        friendly_name: 'Temperature High'
        value_template: "{{ states('sensor.dark_sky_daytime_high_temperature') | round (1) }}"
        icon_template: mdi:thermometer
        unit_of_measurement: "%"
      temperature_low_templated:
        friendly_name: 'Temperature Low'
        value_template: "{{ states('sensor.dark_sky_overnight_low_temperature') | round (1) }}"
        icon_template: mdi:thermometer
        unit_of_measurement: "%"
  - platform: systemmonitor
    resources:
      - type: disk_free
        arg: /
      - type: disk_use_percent
        arg: /
      - type: memory_free
      - type: memory_use
      - type: swap_use
      - type: swap_free
      - type: processor_use
      - type: last_boot
      - type: since_last_boot
  - platform: scrape
    resource: http://192.168.1.91/web/subservices
    name: TV Channel 
    select: 'e2servicename'
  - platform: scrape
    resource: http://192.168.1.91/web/getcurrent
    name: TV Program 
    select: 'e2eventtitle'
  - platform: scrape
    resource: http://192.168.1.91/web/powerstate
    name: Gigablue Power State
    select: 'e2instandby'
    value_template: '{{value.replace("true","off")|replace("false","on") }}'
  
    

      
      
