  - platform: moon
  - platform: time_date
    display_options:
      - 'time'
      - 'date'
      - 'date_time'
      - 'date_time_iso'
      - 'time_date'
      - 'time_utc'
      - 'beat'
  - platform: openweathermap
    api_key: !secret owm_api 
    monitored_conditions:
      - weather
      - temperature
  - platform: renaultze
    name: Zoe
    scan_interval: 900
    username: !secret zoe_user
    password: !secret zoe_pass
    vin: !secret zoe_vin
    android_lng: en_GB
      
  - platform: template
    sensors:
      last_alexa:
        entity_id:
        - media_player.lr_dot
        - media_player.k_dot
        - media_player.br_echo
        - media_player.fire_7
        value_template: >
          {{ states.media_player | selectattr('attributes.last_called','eq',True) | map(attribute='entity_id') | first }}
      harmony:
        entity_id:
          - remote.harmony_hub
        friendly_name: "Harmony"
        value_template: "{{states.remote.harmony_hub.attributes.current_activity}}"
      zoe_battery:
        value_template: "{{ states('sensor.zoe') }}"
        unit_of_measurement: "%"
        device_class: battery
        friendly_name: "Zoe Battery"
      zoe_remaining_range:
        value_template: "{{ (state_attr('sensor.zoe' , 'remaining_range')* 0.62137)|round(0)}}"
        friendly_name: "Zoe Range"
        unit_of_measurement: "mi"
  
      zoe_mileage:
        value_template: "{{ state_attr('sensor.zoe' , 'mileage')}}"
        friendly_name: "Zoe Mileage"
        unit_of_measurement: "mi"
              
  - platform: systemmonitor
    resources:
      - type: disk_free
        arg: /
      - type: disk_use_percent
        arg: /
      - type: memory_free
      - type: memory_use
      - type: swap_use
      - type: swap_free
      - type: processor_use
      - type: last_boot

    